#!/bin/bash

#move to supper user
sudo su

#update system
apt-get update -y && apt-get upgrade -y

#install all prerequsites
apt-get -y install sqlite3 #install sqlite3 database engine
apt-get -y install libsqlite3-dev #configure: error: SQLite3 library not found
apt-get -y install libsnmp-dev #configure: error: Invalid Net-SNMP directory - unable to find net-snmp-config
apt-get -y install libssh2-1-dev #configure: error: SSH2 library not found
apt-get -y install fping #/usr/sbin/fping: [2] No such file or directory
apt-get -y install libiksemel-dev #configure: error: Jabber library not found
apt-get -y install libxml2-dev #configure: error: LIBXML2 library not found
apt-get -y install unixodbc-dev #configure: error: unixODBC library not found
apt-get -y install libopenipmi-dev #configure: error: Invalid OPENIPMI directory - unable to find ipmiif.h
apt-get -y install libevent-dev #configure: error: Unable to use libevent (libevent check failed)
apt-get -y install libssl-dev #configure: error: OpenSSL library libssl or libcrypto not found
apt-get -y install libcurl4-openssl-dev #configure: error: Curl library not found
apt-get -y install libpcre3-dev #configure: error: Unable to use libpcre (libpcre check failed)
# oir install all together
# apt-get -y install sqlite3 libsqlite3-dev libsnmp-dev libssh2-1-dev fping libiksemel-dev libxml2-dev unixodbc-dev libopenipmi-dev libevent-dev libssl-dev libcurl4-openssl-dev libpcre3-dev

#parametrize this script
v=3.4.12
v=$1

#go to ram drive for faster building
cd /dev/shm
curl -L "http://downloads.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/$v/zabbix-$v.tar.gz" -o zabbix-$v.tar.gz
tar -vzxf zabbix-$v.tar.gz -C .
cd zabbix-$v
./configure --enable-proxy --enable-agent --with-sqlite3 --with-libcurl --with-libxml2 --with-ssh2 --with-net-snmp --with-openipmi --with-jabber --with-openssl --with-unixodbc

#if the previous process was ok then we are ready to compile and install
#let us stop and backup the previous version
systemctl status {zabbix-agent,zabbix-proxy}
systemctl stop {zabbix-agent,zabbix-proxy}

existing_version=$(zabbix_proxy -V|egrep -o "[0-9]+\.[0-9]+\.[0-9]+")
mkdir ~/$existing_version

#backup/move zabbix_agentd and zabbix_proxy
cd /usr/local/sbin && mkdir -p ~/$existing_version/$(pwd) && mv * ~/$existing_version/$(pwd)

#backup/move zabbix_sender and zabbix_get
cd /usr/local/bin && mkdir -p ~/$existing_version/$(pwd) && mv zabbix_get ~/$existing_version/$(pwd)
cd /usr/local/bin && mkdir -p ~/$existing_version/$(pwd) && mv zabbix_sender ~/$existing_version/$(pwd)

#make a copy of zabbix_agentd.conf,zabbix_proxy.conf,zabbix_agentd.conf.d,zabbix_proxy.conf.d
cd /usr/local/etc && mkdir -p ~/$existing_version/$(pwd) && cp -R * ~/$existing_version/$(pwd)

cd /dev/shm/zabbix-$v
time make install

echo
echo default config file:
grep -v "^#\|^$" /usr/local/etc/zabbix_proxy.conf
echo


#start zabbix server at reboot
cat > /etc/init.d/zabbix-proxy << EOF
#!/bin/sh
### BEGIN INIT INFO
# Provides:          zabbix-proxy
# Required-Start:    \$remote_fs \$network
# Required-Stop:     \$remote_fs
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start zabbix-proxy daemon
### END INIT INFO
EOF
grep -v "^#\!\/bin\/sh$" /dev/shm/zabbix-$v/misc/init.d/debian/zabbix-server >> /etc/init.d/zabbix-proxy
sed -i "s/server/proxy/g" /etc/init.d/zabbix-proxy
chmod +x /etc/init.d/zabbix-proxy

#start zabbix agent at reboot
cat > /etc/init.d/zabbix-agent << EOF
#!/bin/sh
### BEGIN INIT INFO
# Provides:          zabbix-agent
# Required-Start:    \$remote_fs \$network
# Required-Stop:     \$remote_fs
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start zabbix-agent daemon
### END INIT INFO
EOF
grep -v "^#\!\/bin\/sh$" /dev/shm/zabbix-$v/misc/init.d/debian/zabbix-agent >> /etc/init.d/zabbix-agent
chmod +x /etc/init.d/zabbix-agent



#re-read all startup applicaition
systemctl daemon-reload

groupadd zabbix
useradd -g zabbix zabbix
usermod -a -G video zabbix #to access custom metrics like [vcgencmd measure_temp]

# set conf
echo "IyBUaGlzIGlzIGEgY29uZmlndXJhdGlvbiBmaWxlIGZvciBaYWJiaXggcHJveHkgZGFlbW9uCiMgVG8gZ2V0IG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgWmFiYml4LCB2aXNpdCBodHRwOi8vd3d3LnphYmJpeC5jb20KCiMjIyMjIyMjIyMjIyBHRU5FUkFMIFBBUkFNRVRFUlMgIyMjIyMjIyMjIyMjIyMjIyMKCiMjIyBPcHRpb246IFByb3h5TW9kZQojCVByb3h5IG9wZXJhdGluZyBtb2RlLgojCTAgLSBwcm94eSBpbiB0aGUgYWN0aXZlIG1vZGUKIwkxIC0gcHJveHkgaW4gdGhlIHBhc3NpdmUgbW9kZQojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgUHJveHlNb2RlPTAKUHJveHlNb2RlPTAKCgojIyMgT3B0aW9uOiBTZXJ2ZXIKIwlJUCBhZGRyZXNzIChvciBob3N0bmFtZSkgb2YgWmFiYml4IHNlcnZlci4KIwlBY3RpdmUgcHJveHkgd2lsbCBnZXQgY29uZmlndXJhdGlvbiBkYXRhIGZyb20gdGhlIHNlcnZlci4KIwlGb3IgYSBwcm94eSBpbiB0aGUgcGFzc2l2ZSBtb2RlIHRoaXMgcGFyYW1ldGVyIHdpbGwgYmUgaWdub3JlZC4KIwojIE1hbmRhdG9yeTogeWVzIChpZiBQcm94eU1vZGUgaXMgc2V0IHRvIDApCiMgRGVmYXVsdDoKIyBTZXJ2ZXI9ClNlcnZlcj1lYzItMzUtMTY2LTk3LTEzOC51cy13ZXN0LTIuY29tcHV0ZS5hbWF6b25hd3MuY29tCgojIyMgT3B0aW9uOiBTZXJ2ZXJQb3J0CiMJUG9ydCBvZiBaYWJiaXggdHJhcHBlciBvbiBaYWJiaXggc2VydmVyLgojCUZvciBhIHByb3h5IGluIHRoZSBwYXNzaXZlIG1vZGUgdGhpcyBwYXJhbWV0ZXIgd2lsbCBiZSBpZ25vcmVkLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAxMDI0LTMyNzY3CiMgRGVmYXVsdDoKIyBTZXJ2ZXJQb3J0PTEwMDUxCgojIyMgT3B0aW9uOiBIb3N0bmFtZQojCVVuaXF1ZSwgY2FzZSBzZW5zaXRpdmUgUHJveHkgbmFtZS4gTWFrZSBzdXJlIHRoZSBQcm94eSBuYW1lIGlzIGtub3duIHRvIHRoZSBzZXJ2ZXIhCiMJVmFsdWUgaXMgYWNxdWlyZWQgZnJvbSBIb3N0bmFtZUl0ZW0gaWYgdW5kZWZpbmVkLgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgSG9zdG5hbWU9CgojIyMgT3B0aW9uOiBIb3N0bmFtZUl0ZW0KIwlJdGVtIHVzZWQgZm9yIGdlbmVyYXRpbmcgSG9zdG5hbWUgaWYgaXQgaXMgdW5kZWZpbmVkLgojCUlnbm9yZWQgaWYgSG9zdG5hbWUgaXMgZGVmaW5lZC4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIEhvc3RuYW1lSXRlbT1zeXN0ZW0uaG9zdG5hbWUKSG9zdG5hbWVJdGVtPXN5c3RlbS5ydW5baWZjb25maWcgZXRoMHxlZ3JlcCAtbyAiLi46Li46Li4gInxzZWQgInN8Onx8ZztzfC4kfHw7c3xefFJQaVByb3hZfCJdCgojIyMgT3B0aW9uOiBMaXN0ZW5Qb3J0CiMJTGlzdGVuIHBvcnQgZm9yIHRyYXBwZXIuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEwMjQtMzI3NjcKIyBEZWZhdWx0OgojIExpc3RlblBvcnQ9MTAwNTEKI0xpc3RlblBvcnQ9MTAwNzEKCiMjIyBPcHRpb246IFNvdXJjZUlQCiMJU291cmNlIElQIGFkZHJlc3MgZm9yIG91dGdvaW5nIGNvbm5lY3Rpb25zLgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgU291cmNlSVA9CgojIyMgT3B0aW9uOiBMb2dUeXBlCiMJU3BlY2lmaWVzIHdoZXJlIGxvZyBtZXNzYWdlcyBhcmUgd3JpdHRlbiB0bzoKIwkJc3lzdGVtICAtIHN5c2xvZwojCQlmaWxlICAgIC0gZmlsZSBzcGVjaWZpZWQgd2l0aCBMb2dGaWxlIHBhcmFtZXRlcgojCQljb25zb2xlIC0gc3RhbmRhcmQgb3V0cHV0CiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBMb2dUeXBlPWZpbGUKCiMjIyBPcHRpb246IExvZ0ZpbGUKIwlMb2cgZmlsZSBuYW1lIGZvciBMb2dUeXBlICdmaWxlJyBwYXJhbWV0ZXIuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBMb2dGaWxlPQoKTG9nRmlsZT0vZGV2L3NobS96YWJiaXhfcHJveHkubG9nCgojIyMgT3B0aW9uOiBMb2dGaWxlU2l6ZQojCU1heGltdW0gc2l6ZSBvZiBsb2cgZmlsZSBpbiBNQi4KIwkwIC0gZGlzYWJsZSBhdXRvbWF0aWMgbG9nIHJvdGF0aW9uLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTEwMjQKIyBEZWZhdWx0OgojIExvZ0ZpbGVTaXplPTEKCiMjIyBPcHRpb246IERlYnVnTGV2ZWwKIwlTcGVjaWZpZXMgZGVidWcgbGV2ZWw6CiMJMCAtIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IHN0YXJ0aW5nIGFuZCBzdG9wcGluZyBvZiBaYWJiaXggcHJvY2Vzc2VzCiMJMSAtIGNyaXRpY2FsIGluZm9ybWF0aW9uCiMJMiAtIGVycm9yIGluZm9ybWF0aW9uCiMJMyAtIHdhcm5pbmdzCiMJNCAtIGZvciBkZWJ1Z2dpbmcgKHByb2R1Y2VzIGxvdHMgb2YgaW5mb3JtYXRpb24pCiMJNSAtIGV4dGVuZGVkIGRlYnVnZ2luZyAocHJvZHVjZXMgZXZlbiBtb3JlIGluZm9ybWF0aW9uKQojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTUKIyBEZWZhdWx0OgojIERlYnVnTGV2ZWw9MwoKIyMjIE9wdGlvbjogRW5hYmxlUmVtb3RlQ29tbWFuZHMKIyAgICAgICBXaGV0aGVyIHJlbW90ZSBjb21tYW5kcyBmcm9tIFphYmJpeCBzZXJ2ZXIgYXJlIGFsbG93ZWQuCiMgICAgICAgMCAtIG5vdCBhbGxvd2VkCiMgICAgICAgMSAtIGFsbG93ZWQKIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgpFbmFibGVSZW1vdGVDb21tYW5kcz0xCgojIyMgT3B0aW9uOiBMb2dSZW1vdGVDb21tYW5kcwojICAgICAgIEVuYWJsZSBsb2dnaW5nIG9mIGV4ZWN1dGVkIHNoZWxsIGNvbW1hbmRzIGFzIHdhcm5pbmdzLgojICAgICAgIDAgLSBkaXNhYmxlZAojICAgICAgIDEgLSBlbmFibGVkCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKTG9nUmVtb3RlQ29tbWFuZHM9MQoKIyMjIE9wdGlvbjogUGlkRmlsZQojCU5hbWUgb2YgUElEIGZpbGUuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBQaWRGaWxlPS90bXAvemFiYml4X3Byb3h5LnBpZApQaWRGaWxlPS9kZXYvc2htL3phYmJpeF9wcm94eS5waWQKCiMjIyBPcHRpb246IFNvY2tldERpcgojCUlQQyBzb2NrZXQgZGlyZWN0b3J5LgojICAgICAgIERpcmVjdG9yeSB0byBzdG9yZSBJUEMgc29ja2V0cyB1c2VkIGJ5IGludGVybmFsIFphYmJpeCBzZXJ2aWNlcy4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFNvY2tldERpcj0vdG1wCgojIyMgT3B0aW9uOiBEQkhvc3QKIwlEYXRhYmFzZSBob3N0IG5hbWUuCiMJSWYgc2V0IHRvIGxvY2FsaG9zdCwgc29ja2V0IGlzIHVzZWQgZm9yIE15U1FMLgojCUlmIHNldCB0byBlbXB0eSBzdHJpbmcsIHNvY2tldCBpcyB1c2VkIGZvciBQb3N0Z3JlU1FMLgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgREJIb3N0PWxvY2FsaG9zdAoKIyMjIE9wdGlvbjogREJOYW1lCiMJRGF0YWJhc2UgbmFtZS4KIwlGb3IgU1FMaXRlMyBwYXRoIHRvIGRhdGFiYXNlIGZpbGUgbXVzdCBiZSBwcm92aWRlZC4gREJVc2VyIGFuZCBEQlBhc3N3b3JkIGFyZSBpZ25vcmVkLgojCVdhcm5pbmc6IGRvIG5vdCBhdHRlbXB0IHRvIHVzZSB0aGUgc2FtZSBkYXRhYmFzZSBaYWJiaXggc2VydmVyIGlzIHVzaW5nLgojCiMgTWFuZGF0b3J5OiB5ZXMKIyBEZWZhdWx0OgojIERCTmFtZT0KCkRCTmFtZT0vZGV2L3NobS96YWJiaXhfcHJveHkuZGIuc3FsaXRlMwoKIyMjIE9wdGlvbjogREJTY2hlbWEKIwlTY2hlbWEgbmFtZS4gVXNlZCBmb3IgSUJNIERCMiBhbmQgUG9zdGdyZVNRTC4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIERCU2NoZW1hPQoKIyMjIE9wdGlvbjogREJVc2VyCiMJRGF0YWJhc2UgdXNlci4gSWdub3JlZCBmb3IgU1FMaXRlLgojCiMgRGVmYXVsdDoKIyBEQlVzZXI9CgojREJVc2VyPXphYmJpeAoKIyMjIE9wdGlvbjogREJQYXNzd29yZAojCURhdGFiYXNlIHBhc3N3b3JkLiBJZ25vcmVkIGZvciBTUUxpdGUuCiMJQ29tbWVudCB0aGlzIGxpbmUgaWYgbm8gcGFzc3dvcmQgaXMgdXNlZC4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojREJQYXNzd29yZD1kckZKN3h4NU1OVGJxSjM5CgojIyMgT3B0aW9uOiBEQlNvY2tldAojCVBhdGggdG8gTXlTUUwgc29ja2V0LgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgREJTb2NrZXQ9L3RtcC9teXNxbC5zb2NrCgojIE9wdGlvbjogREJQb3J0CiMJRGF0YWJhc2UgcG9ydCB3aGVuIG5vdCB1c2luZyBsb2NhbCBzb2NrZXQuIElnbm9yZWQgZm9yIFNRTGl0ZS4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0IChmb3IgTXlTUUwpOgojIERCUG9ydD0zMzA2CgojIyMjIyMjIyMgUFJPWFkgU1BFQ0lGSUMgUEFSQU1FVEVSUyAjIyMjIyMjIyMjIyMjCgojIyMgT3B0aW9uOiBQcm94eUxvY2FsQnVmZmVyCiMJUHJveHkgd2lsbCBrZWVwIGRhdGEgbG9jYWxseSBmb3IgTiBob3VycywgZXZlbiBpZiB0aGUgZGF0YSBoYXZlIGFscmVhZHkgYmVlbiBzeW5jZWQgd2l0aCB0aGUgc2VydmVyLgojCVRoaXMgcGFyYW1ldGVyIG1heSBiZSB1c2VkIGlmIGxvY2FsIGRhdGEgd2lsbCBiZSB1c2VkIGJ5IHRoaXJkIHBhcnR5IGFwcGxpY2F0aW9ucy4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMC03MjAKIyBEZWZhdWx0OgojIFByb3h5TG9jYWxCdWZmZXI9MAoKIyMjIE9wdGlvbjogUHJveHlPZmZsaW5lQnVmZmVyCiMJUHJveHkgd2lsbCBrZWVwIGRhdGEgZm9yIE4gaG91cnMgaW4gY2FzZSBpZiBubyBjb25uZWN0aXZpdHkgd2l0aCBaYWJiaXggU2VydmVyLgojCU9sZGVyIGRhdGEgd2lsbCBiZSBsb3N0LgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAxLTcyMAojIERlZmF1bHQ6CiMgUHJveHlPZmZsaW5lQnVmZmVyPTEKCiMjIyBPcHRpb246IEhlYXJ0YmVhdEZyZXF1ZW5jeQojCUZyZXF1ZW5jeSBvZiBoZWFydGJlYXQgbWVzc2FnZXMgaW4gc2Vjb25kcy4KIwlVc2VkIGZvciBtb25pdG9yaW5nIGF2YWlsYWJpbGl0eSBvZiBQcm94eSBvbiBzZXJ2ZXIgc2lkZS4KIwkwIC0gaGVhcnRiZWF0IG1lc3NhZ2VzIGRpc2FibGVkLgojCUZvciBhIHByb3h5IGluIHRoZSBwYXNzaXZlIG1vZGUgdGhpcyBwYXJhbWV0ZXIgd2lsbCBiZSBpZ25vcmVkLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTM2MDAKIyBEZWZhdWx0OgojIEhlYXJ0YmVhdEZyZXF1ZW5jeT02MAoKIyMjIE9wdGlvbjogQ29uZmlnRnJlcXVlbmN5CiMJSG93IG9mdGVuIHByb3h5IHJldHJpZXZlcyBjb25maWd1cmF0aW9uIGRhdGEgZnJvbSBaYWJiaXggU2VydmVyIGluIHNlY29uZHMuCiMJRm9yIGEgcHJveHkgaW4gdGhlIHBhc3NpdmUgbW9kZSB0aGlzIHBhcmFtZXRlciB3aWxsIGJlIGlnbm9yZWQuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEtMzYwMCoyNCo3CiMgRGVmYXVsdDoKIyBDb25maWdGcmVxdWVuY3k9MzYwMAoKQ29uZmlnRnJlcXVlbmN5PTMwMAoKIyMjIE9wdGlvbjogRGF0YVNlbmRlckZyZXF1ZW5jeQojCVByb3h5IHdpbGwgc2VuZCBjb2xsZWN0ZWQgZGF0YSB0byB0aGUgU2VydmVyIGV2ZXJ5IE4gc2Vjb25kcy4KIwlGb3IgYSBwcm94eSBpbiB0aGUgcGFzc2l2ZSBtb2RlIHRoaXMgcGFyYW1ldGVyIHdpbGwgYmUgaWdub3JlZC4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMS0zNjAwCiMgRGVmYXVsdDoKIyBEYXRhU2VuZGVyRnJlcXVlbmN5PTEKCiMjIyMjIyMjIyMjIyBBRFZBTkNFRCBQQVJBTUVURVJTICMjIyMjIyMjIyMjIyMjIyMKCiMjIyBPcHRpb246IFN0YXJ0UG9sbGVycwojCU51bWJlciBvZiBwcmUtZm9ya2VkIGluc3RhbmNlcyBvZiBwb2xsZXJzLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTEwMDAKIyBEZWZhdWx0OgojIFN0YXJ0UG9sbGVycz01ClN0YXJ0UG9sbGVycz0xNQoKIyMjIE9wdGlvbjogU3RhcnRJUE1JUG9sbGVycwojCU51bWJlciBvZiBwcmUtZm9ya2VkIGluc3RhbmNlcyBvZiBJUE1JIHBvbGxlcnMuCiMgICAgICAgVGhlIElQTUkgbWFuYWdlciBwcm9jZXNzIGlzIGF1dG9tYXRpY2FsbHkgc3RhcnRlZCB3aGVuIGF0IGxlYXN0IG9uZSBJUE1JIHBvbGxlciBpcyBzdGFydGVkLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTEwMDAKIyBEZWZhdWx0OgojIFN0YXJ0SVBNSVBvbGxlcnM9MAoKIyMjIE9wdGlvbjogU3RhcnRQb2xsZXJzVW5yZWFjaGFibGUKIwlOdW1iZXIgb2YgcHJlLWZvcmtlZCBpbnN0YW5jZXMgb2YgcG9sbGVycyBmb3IgdW5yZWFjaGFibGUgaG9zdHMgKGluY2x1ZGluZyBJUE1JIGFuZCBKYXZhKS4KIwlBdCBsZWFzdCBvbmUgcG9sbGVyIGZvciB1bnJlYWNoYWJsZSBob3N0cyBtdXN0IGJlIHJ1bm5pbmcgaWYgcmVndWxhciwgSVBNSSBvciBKYXZhIHBvbGxlcnMKIwlhcmUgc3RhcnRlZC4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMC0xMDAwCiMgRGVmYXVsdDoKIyBTdGFydFBvbGxlcnNVbnJlYWNoYWJsZT0xCgojIyMgT3B0aW9uOiBTdGFydFRyYXBwZXJzCiMJTnVtYmVyIG9mIHByZS1mb3JrZWQgaW5zdGFuY2VzIG9mIHRyYXBwZXJzLgojCVRyYXBwZXJzIGFjY2VwdCBpbmNvbWluZyBjb25uZWN0aW9ucyBmcm9tIFphYmJpeCBzZW5kZXIgYW5kIGFjdGl2ZSBhZ2VudHMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDAtMTAwMAojIERlZmF1bHQ6CiMgU3RhcnRUcmFwcGVycz01CgojIyMgT3B0aW9uOiBTdGFydFBpbmdlcnMKIwlOdW1iZXIgb2YgcHJlLWZvcmtlZCBpbnN0YW5jZXMgb2YgSUNNUCBwaW5nZXJzLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTEwMDAKIyBEZWZhdWx0OgojIFN0YXJ0UGluZ2Vycz0xCgojIyMgT3B0aW9uOiBTdGFydERpc2NvdmVyZXJzCiMJTnVtYmVyIG9mIHByZS1mb3JrZWQgaW5zdGFuY2VzIG9mIGRpc2NvdmVyZXJzLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTI1MAojIERlZmF1bHQ6CiMgU3RhcnREaXNjb3ZlcmVycz0xCgojIyMgT3B0aW9uOiBTdGFydEhUVFBQb2xsZXJzCiMJTnVtYmVyIG9mIHByZS1mb3JrZWQgaW5zdGFuY2VzIG9mIEhUVFAgcG9sbGVycy4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMC0xMDAwCiMgRGVmYXVsdDoKIyBTdGFydEhUVFBQb2xsZXJzPTEKCiMjIyBPcHRpb246IEphdmFHYXRld2F5CiMJSVAgYWRkcmVzcyAob3IgaG9zdG5hbWUpIG9mIFphYmJpeCBKYXZhIGdhdGV3YXkuCiMJT25seSByZXF1aXJlZCBpZiBKYXZhIHBvbGxlcnMgYXJlIHN0YXJ0ZWQuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBKYXZhR2F0ZXdheT0KCiMjIyBPcHRpb246IEphdmFHYXRld2F5UG9ydAojCVBvcnQgdGhhdCBaYWJiaXggSmF2YSBnYXRld2F5IGxpc3RlbnMgb24uCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEwMjQtMzI3NjcKIyBEZWZhdWx0OgojIEphdmFHYXRld2F5UG9ydD0xMDA1MgoKIyMjIE9wdGlvbjogU3RhcnRKYXZhUG9sbGVycwojCU51bWJlciBvZiBwcmUtZm9ya2VkIGluc3RhbmNlcyBvZiBKYXZhIHBvbGxlcnMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDAtMTAwMAojIERlZmF1bHQ6CiMgU3RhcnRKYXZhUG9sbGVycz0wCgojIyMgT3B0aW9uOiBTdGFydFZNd2FyZUNvbGxlY3RvcnMKIwlOdW1iZXIgb2YgcHJlLWZvcmtlZCB2bXdhcmUgY29sbGVjdG9yIGluc3RhbmNlcy4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMC0yNTAKIyBEZWZhdWx0OgojIFN0YXJ0Vk13YXJlQ29sbGVjdG9ycz0wCgojIyMgT3B0aW9uOiBWTXdhcmVGcmVxdWVuY3kKIwlIb3cgb2Z0ZW4gWmFiYml4IHdpbGwgY29ubmVjdCB0byBWTXdhcmUgc2VydmljZSB0byBvYnRhaW4gYSBuZXcgZGF0YS4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMTAtODY0MDAKIyBEZWZhdWx0OgojIFZNd2FyZUZyZXF1ZW5jeT02MAoKIyMjIE9wdGlvbjogVk13YXJlUGVyZkZyZXF1ZW5jeQojCUhvdyBvZnRlbiBaYWJiaXggd2lsbCBjb25uZWN0IHRvIFZNd2FyZSBzZXJ2aWNlIHRvIG9idGFpbiBwZXJmb3JtYW5jZSBkYXRhLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAxMC04NjQwMAojIERlZmF1bHQ6CiMgVk13YXJlUGVyZkZyZXF1ZW5jeT02MAoKIyMjIE9wdGlvbjogVk13YXJlQ2FjaGVTaXplCiMJU2l6ZSBvZiBWTXdhcmUgY2FjaGUsIGluIGJ5dGVzLgojCVNoYXJlZCBtZW1vcnkgc2l6ZSBmb3Igc3RvcmluZyBWTXdhcmUgZGF0YS4KIwlPbmx5IHVzZWQgaWYgVk13YXJlIGNvbGxlY3RvcnMgYXJlIHN0YXJ0ZWQuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDI1NkstMkcKIyBEZWZhdWx0OgojIFZNd2FyZUNhY2hlU2l6ZT04TQoKIyMjIE9wdGlvbjogVk13YXJlVGltZW91dAojCVNwZWNpZmllcyBob3cgbWFueSBzZWNvbmRzIHZtd2FyZSBjb2xsZWN0b3Igd2FpdHMgZm9yIHJlc3BvbnNlIGZyb20gVk13YXJlIHNlcnZpY2UuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEtMzAwCiMgRGVmYXVsdDoKIyBWTXdhcmVUaW1lb3V0PTEwCgojIyMgT3B0aW9uOiBTTk1QVHJhcHBlckZpbGUKIwlUZW1wb3JhcnkgZmlsZSB1c2VkIGZvciBwYXNzaW5nIGRhdGEgZnJvbSBTTk1QIHRyYXAgZGFlbW9uIHRvIHRoZSBwcm94eS4KIwlNdXN0IGJlIHRoZSBzYW1lIGFzIGluIHphYmJpeF90cmFwX3JlY2VpdmVyLnBsIG9yIFNOTVBUVCBjb25maWd1cmF0aW9uIGZpbGUuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBTTk1QVHJhcHBlckZpbGU9L3RtcC96YWJiaXhfdHJhcHMudG1wCgojIyMgT3B0aW9uOiBTdGFydFNOTVBUcmFwcGVyCiMJSWYgMSwgU05NUCB0cmFwcGVyIHByb2Nlc3MgaXMgc3RhcnRlZC4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMC0xCiMgRGVmYXVsdDoKIyBTdGFydFNOTVBUcmFwcGVyPTAKU3RhcnRTTk1QVHJhcHBlcj0wCgojIyMgT3B0aW9uOiBMaXN0ZW5JUAojCUxpc3Qgb2YgY29tbWEgZGVsaW1pdGVkIElQIGFkZHJlc3NlcyB0aGF0IHRoZSB0cmFwcGVyIHNob3VsZCBsaXN0ZW4gb24uCiMJVHJhcHBlciB3aWxsIGxpc3RlbiBvbiBhbGwgbmV0d29yayBpbnRlcmZhY2VzIGlmIHRoaXMgcGFyYW1ldGVyIGlzIG1pc3NpbmcuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBMaXN0ZW5JUD0wLjAuMC4wCgojIyMgT3B0aW9uOiBIb3VzZWtlZXBpbmdGcmVxdWVuY3kKIwlIb3cgb2Z0ZW4gWmFiYml4IHdpbGwgcGVyZm9ybSBob3VzZWtlZXBpbmcgcHJvY2VkdXJlIChpbiBob3VycykuCiMJSG91c2VrZWVwaW5nIGlzIHJlbW92aW5nIG91dGRhdGVkIGluZm9ybWF0aW9uIGZyb20gdGhlIGRhdGFiYXNlLgojCVRvIHByZXZlbnQgSG91c2VrZWVwZXIgZnJvbSBiZWluZyBvdmVybG9hZGVkLCBubyBtb3JlIHRoYW4gNCB0aW1lcyBIb3VzZWtlZXBpbmdGcmVxdWVuY3kKIwlob3VycyBvZiBvdXRkYXRlZCBpbmZvcm1hdGlvbiBhcmUgZGVsZXRlZCBpbiBvbmUgaG91c2VrZWVwaW5nIGN5Y2xlLgojCVRvIGxvd2VyIGxvYWQgb24gcHJveHkgc3RhcnR1cCBob3VzZWtlZXBpbmcgaXMgcG9zdHBvbmVkIGZvciAzMCBtaW51dGVzIGFmdGVyIHByb3h5IHN0YXJ0LgojCVdpdGggSG91c2VrZWVwaW5nRnJlcXVlbmN5PTAgdGhlIGhvdXNla2VlcGVyIGNhbiBiZSBvbmx5IGV4ZWN1dGVkIHVzaW5nIHRoZSBydW50aW1lIGNvbnRyb2wgb3B0aW9uLgojCUluIHRoaXMgY2FzZSB0aGUgcGVyaW9kIG9mIG91dGRhdGVkIGluZm9ybWF0aW9uIGRlbGV0ZWQgaW4gb25lIGhvdXNla2VlcGluZyBjeWNsZSBpcyA0IHRpbWVzIHRoZQojCXBlcmlvZCBzaW5jZSB0aGUgbGFzdCBob3VzZWtlZXBpbmcgY3ljbGUsIGJ1dCBub3QgbGVzcyB0aGFuIDQgaG91cnMgYW5kIG5vdCBncmVhdGVyIHRoYW4gNCBkYXlzLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTI0CiMgRGVmYXVsdDoKIyBIb3VzZWtlZXBpbmdGcmVxdWVuY3k9MQoKIyMjIE9wdGlvbjogQ2FjaGVTaXplCiMJU2l6ZSBvZiBjb25maWd1cmF0aW9uIGNhY2hlLCBpbiBieXRlcy4KIwlTaGFyZWQgbWVtb3J5IHNpemUsIGZvciBzdG9yaW5nIGhvc3RzIGFuZCBpdGVtcyBkYXRhLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAxMjhLLThHCiMgRGVmYXVsdDoKIyBDYWNoZVNpemU9OE0KCiMjIyBPcHRpb246IFN0YXJ0REJTeW5jZXJzCiMJTnVtYmVyIG9mIHByZS1mb3JrZWQgaW5zdGFuY2VzIG9mIERCIFN5bmNlcnMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEtMTAwCiMgRGVmYXVsdDoKIyBTdGFydERCU3luY2Vycz00CgojIyMgT3B0aW9uOiBIaXN0b3J5Q2FjaGVTaXplCiMJU2l6ZSBvZiBoaXN0b3J5IGNhY2hlLCBpbiBieXRlcy4KIwlTaGFyZWQgbWVtb3J5IHNpemUgZm9yIHN0b3JpbmcgaGlzdG9yeSBkYXRhLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAxMjhLLTJHCiMgRGVmYXVsdDoKIyBIaXN0b3J5Q2FjaGVTaXplPTE2TQoKIyMjIE9wdGlvbjogSGlzdG9yeUluZGV4Q2FjaGVTaXplCiMJU2l6ZSBvZiBoaXN0b3J5IGluZGV4IGNhY2hlLCBpbiBieXRlcy4KIwlTaGFyZWQgbWVtb3J5IHNpemUgZm9yIGluZGV4aW5nIGhpc3RvcnkgY2FjaGUuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEyOEstMkcKIyBEZWZhdWx0OgojIEhpc3RvcnlJbmRleENhY2hlU2l6ZT00TQoKIyMjIE9wdGlvbjogVGltZW91dAojCVNwZWNpZmllcyBob3cgbG9uZyB3ZSB3YWl0IGZvciBhZ2VudCwgU05NUCBkZXZpY2Ugb3IgZXh0ZXJuYWwgY2hlY2sgKGluIHNlY29uZHMpLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAxLTMwCiMgRGVmYXVsdDoKIyBUaW1lb3V0PTMKClRpbWVvdXQ9MzAKCiMjIyBPcHRpb246IFRyYXBwZXJUaW1lb3V0CiMJU3BlY2lmaWVzIGhvdyBtYW55IHNlY29uZHMgdHJhcHBlciBtYXkgc3BlbmQgcHJvY2Vzc2luZyBuZXcgZGF0YS4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMS0zMDAKIyBEZWZhdWx0OgojIFRyYXBwZXJUaW1lb3V0PTMwMAoKIyMjIE9wdGlvbjogVW5yZWFjaGFibGVQZXJpb2QKIwlBZnRlciBob3cgbWFueSBzZWNvbmRzIG9mIHVucmVhY2hhYmlsaXR5IHRyZWF0IGEgaG9zdCBhcyB1bmF2YWlsYWJsZS4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMS0zNjAwCiMgRGVmYXVsdDoKIyBVbnJlYWNoYWJsZVBlcmlvZD00NQoKIyMjIE9wdGlvbjogVW5hdmFpbGFibGVEZWxheQojCUhvdyBvZnRlbiBob3N0IGlzIGNoZWNrZWQgZm9yIGF2YWlsYWJpbGl0eSBkdXJpbmcgdGhlIHVuYXZhaWxhYmlsaXR5IHBlcmlvZCwgaW4gc2Vjb25kcy4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMS0zNjAwCiMgRGVmYXVsdDoKIyBVbmF2YWlsYWJsZURlbGF5PTYwCgojIyMgT3B0aW9uOiBVbnJlYWNoYWJsZURlbGF5CiMJSG93IG9mdGVuIGhvc3QgaXMgY2hlY2tlZCBmb3IgYXZhaWxhYmlsaXR5IGR1cmluZyB0aGUgdW5yZWFjaGFiaWxpdHkgcGVyaW9kLCBpbiBzZWNvbmRzLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAxLTM2MDAKIyBEZWZhdWx0OgojIFVucmVhY2hhYmxlRGVsYXk9MTUKCiMjIyBPcHRpb246IEV4dGVybmFsU2NyaXB0cwojCUZ1bGwgcGF0aCB0byBsb2NhdGlvbiBvZiBleHRlcm5hbCBzY3JpcHRzLgojCURlZmF1bHQgZGVwZW5kcyBvbiBjb21waWxhdGlvbiBvcHRpb25zLgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgRXh0ZXJuYWxTY3JpcHRzPSR7ZGF0YWRpcn0vemFiYml4L2V4dGVybmFsc2NyaXB0cwoKIyMjIE9wdGlvbjogRnBpbmdMb2NhdGlvbgojCUxvY2F0aW9uIG9mIGZwaW5nLgojCU1ha2Ugc3VyZSB0aGF0IGZwaW5nIGJpbmFyeSBoYXMgcm9vdCBvd25lcnNoaXAgYW5kIFNVSUQgZmxhZyBzZXQuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKRnBpbmdMb2NhdGlvbj0vdXNyL2Jpbi9mcGluZwoKIyMjIE9wdGlvbjogRnBpbmc2TG9jYXRpb24KIwlMb2NhdGlvbiBvZiBmcGluZzYuCiMJTWFrZSBzdXJlIHRoYXQgZnBpbmc2IGJpbmFyeSBoYXMgcm9vdCBvd25lcnNoaXAgYW5kIFNVSUQgZmxhZyBzZXQuCiMJTWFrZSBlbXB0eSBpZiB5b3VyIGZwaW5nIHV0aWxpdHkgaXMgY2FwYWJsZSB0byBwcm9jZXNzIElQdjYgYWRkcmVzc2VzLgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgRnBpbmc2TG9jYXRpb249L3Vzci9zYmluL2ZwaW5nNgoKIyMjIE9wdGlvbjogU1NIS2V5TG9jYXRpb24KIwlMb2NhdGlvbiBvZiBwdWJsaWMgYW5kIHByaXZhdGUga2V5cyBmb3IgU1NIIGNoZWNrcyBhbmQgYWN0aW9ucy4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFNTSEtleUxvY2F0aW9uPQoKIyMjIE9wdGlvbjogTG9nU2xvd1F1ZXJpZXMKIwlIb3cgbG9uZyBhIGRhdGFiYXNlIHF1ZXJ5IG1heSB0YWtlIGJlZm9yZSBiZWluZyBsb2dnZWQgKGluIG1pbGxpc2Vjb25kcykuCiMJT25seSB3b3JrcyBpZiBEZWJ1Z0xldmVsIHNldCB0byAzIG9yIDQuCiMJMCAtIGRvbid0IGxvZyBzbG93IHF1ZXJpZXMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEtMzYwMDAwMAojIERlZmF1bHQ6CiMgTG9nU2xvd1F1ZXJpZXM9MAoKTG9nU2xvd1F1ZXJpZXM9MzAwMAoKIyMjIE9wdGlvbjogVG1wRGlyCiMJVGVtcG9yYXJ5IGRpcmVjdG9yeS4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFRtcERpcj0vdG1wCgojIyMgT3B0aW9uOiBBbGxvd1Jvb3QKIwlBbGxvdyB0aGUgcHJveHkgdG8gcnVuIGFzICdyb290Jy4gSWYgZGlzYWJsZWQgYW5kIHRoZSBwcm94eSBpcyBzdGFydGVkIGJ5ICdyb290JywgdGhlIHByb3h5CiMJd2lsbCB0cnkgdG8gc3dpdGNoIHRvIHRoZSB1c2VyIHNwZWNpZmllZCBieSB0aGUgVXNlciBjb25maWd1cmF0aW9uIG9wdGlvbiBpbnN0ZWFkLgojCUhhcyBubyBlZmZlY3QgaWYgc3RhcnRlZCB1bmRlciBhIHJlZ3VsYXIgdXNlci4KIwkwIC0gZG8gbm90IGFsbG93CiMJMSAtIGFsbG93CiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBBbGxvd1Jvb3Q9MAoKIyMjIE9wdGlvbjogVXNlcgojCURyb3AgcHJpdmlsZWdlcyB0byBhIHNwZWNpZmljLCBleGlzdGluZyB1c2VyIG9uIHRoZSBzeXN0ZW0uCiMJT25seSBoYXMgZWZmZWN0IGlmIHJ1biBhcyAncm9vdCcgYW5kIEFsbG93Um9vdCBpcyBkaXNhYmxlZC4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFVzZXI9emFiYml4CgojIyMgT3B0aW9uOiBJbmNsdWRlCiMJWW91IG1heSBpbmNsdWRlIGluZGl2aWR1YWwgZmlsZXMgb3IgYWxsIGZpbGVzIGluIGEgZGlyZWN0b3J5IGluIHRoZSBjb25maWd1cmF0aW9uIGZpbGUuCiMJSW5zdGFsbGluZyBaYWJiaXggd2lsbCBjcmVhdGUgaW5jbHVkZSBkaXJlY3RvcnkgaW4gL3Vzci9sb2NhbC9ldGMsIHVubGVzcyBtb2RpZmllZCBkdXJpbmcgdGhlIGNvbXBpbGUgdGltZS4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIEluY2x1ZGU9CgojIEluY2x1ZGU9L3Vzci9sb2NhbC9ldGMvemFiYml4X3Byb3h5LmdlbmVyYWwuY29uZgojIEluY2x1ZGU9L3Vzci9sb2NhbC9ldGMvemFiYml4X3Byb3h5LmNvbmYuZC8KIyBJbmNsdWRlPS91c3IvbG9jYWwvZXRjL3phYmJpeF9wcm94eS5jb25mLmQvKi5jb25mCgojIyMgT3B0aW9uOiBTU0xDZXJ0TG9jYXRpb24KIwlMb2NhdGlvbiBvZiBTU0wgY2xpZW50IGNlcnRpZmljYXRlcy4KIwlUaGlzIHBhcmFtZXRlciBpcyB1c2VkIG9ubHkgaW4gd2ViIG1vbml0b3JpbmcuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBTU0xDZXJ0TG9jYXRpb249JHtkYXRhZGlyfS96YWJiaXgvc3NsL2NlcnRzCgojIyMgT3B0aW9uOiBTU0xLZXlMb2NhdGlvbgojCUxvY2F0aW9uIG9mIHByaXZhdGUga2V5cyBmb3IgU1NMIGNsaWVudCBjZXJ0aWZpY2F0ZXMuCiMJVGhpcyBwYXJhbWV0ZXIgaXMgdXNlZCBvbmx5IGluIHdlYiBtb25pdG9yaW5nLgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgU1NMS2V5TG9jYXRpb249JHtkYXRhZGlyfS96YWJiaXgvc3NsL2tleXMKCiMjIyBPcHRpb246IFNTTENBTG9jYXRpb24KIwlMb2NhdGlvbiBvZiBjZXJ0aWZpY2F0ZSBhdXRob3JpdHkgKENBKSBmaWxlcyBmb3IgU1NMIHNlcnZlciBjZXJ0aWZpY2F0ZSB2ZXJpZmljYXRpb24uCiMJSWYgbm90IHNldCwgc3lzdGVtLXdpZGUgZGlyZWN0b3J5IHdpbGwgYmUgdXNlZC4KIwlUaGlzIHBhcmFtZXRlciBpcyB1c2VkIG9ubHkgaW4gd2ViIG1vbml0b3JpbmcuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBTU0xDQUxvY2F0aW9uPQoKIyMjIyMjIyBMT0FEQUJMRSBNT0RVTEVTICMjIyMjIyMKCiMjIyBPcHRpb246IExvYWRNb2R1bGVQYXRoCiMJRnVsbCBwYXRoIHRvIGxvY2F0aW9uIG9mIHByb3h5IG1vZHVsZXMuCiMJRGVmYXVsdCBkZXBlbmRzIG9uIGNvbXBpbGF0aW9uIG9wdGlvbnMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBMb2FkTW9kdWxlUGF0aD0ke2xpYmRpcn0vbW9kdWxlcwoKIyMjIE9wdGlvbjogTG9hZE1vZHVsZQojCU1vZHVsZSB0byBsb2FkIGF0IHByb3h5IHN0YXJ0dXAuIE1vZHVsZXMgYXJlIHVzZWQgdG8gZXh0ZW5kIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIHByb3h5LgojCUZvcm1hdDogTG9hZE1vZHVsZT08bW9kdWxlLnNvPgojCVRoZSBtb2R1bGVzIG11c3QgYmUgbG9jYXRlZCBpbiBkaXJlY3Rvcnkgc3BlY2lmaWVkIGJ5IExvYWRNb2R1bGVQYXRoLgojCUl0IGlzIGFsbG93ZWQgdG8gaW5jbHVkZSBtdWx0aXBsZSBMb2FkTW9kdWxlIHBhcmFtZXRlcnMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBMb2FkTW9kdWxlPQoKIyMjIyMjIyBUTFMtUkVMQVRFRCBQQVJBTUVURVJTICMjIyMjIyMKCiMjIyBPcHRpb246IFRMU0Nvbm5lY3QKIwlIb3cgdGhlIHByb3h5IHNob3VsZCBjb25uZWN0IHRvIFphYmJpeCBzZXJ2ZXIuIFVzZWQgZm9yIGFuIGFjdGl2ZSBwcm94eSwgaWdub3JlZCBvbiBhIHBhc3NpdmUgcHJveHkuCiMJT25seSBvbmUgdmFsdWUgY2FuIGJlIHNwZWNpZmllZDoKIwkJdW5lbmNyeXB0ZWQgLSBjb25uZWN0IHdpdGhvdXQgZW5jcnlwdGlvbgojCQlwc2sgICAgICAgICAtIGNvbm5lY3QgdXNpbmcgVExTIGFuZCBhIHByZS1zaGFyZWQga2V5CiMJCWNlcnQgICAgICAgIC0gY29ubmVjdCB1c2luZyBUTFMgYW5kIGEgY2VydGlmaWNhdGUKIwojIE1hbmRhdG9yeTogeWVzLCBpZiBUTFMgY2VydGlmaWNhdGUgb3IgUFNLIHBhcmFtZXRlcnMgYXJlIGRlZmluZWQgKGV2ZW4gZm9yICd1bmVuY3J5cHRlZCcgY29ubmVjdGlvbikKIyBEZWZhdWx0OgojIFRMU0Nvbm5lY3Q9dW5lbmNyeXB0ZWQKI1RMU0Nvbm5lY3Q9cHNrCgojIyMgT3B0aW9uOiBUTFNBY2NlcHQKIwlXaGF0IGluY29taW5nIGNvbm5lY3Rpb25zIHRvIGFjY2VwdCBmcm9tIFphYmJpeCBzZXJ2ZXIuIFVzZWQgZm9yIGEgcGFzc2l2ZSBwcm94eSwgaWdub3JlZCBvbiBhbiBhY3RpdmUgcHJveHkuCiMJTXVsdGlwbGUgdmFsdWVzIGNhbiBiZSBzcGVjaWZpZWQsIHNlcGFyYXRlZCBieSBjb21tYToKIwkJdW5lbmNyeXB0ZWQgLSBhY2NlcHQgY29ubmVjdGlvbnMgd2l0aG91dCBlbmNyeXB0aW9uCiMJCXBzayAgICAgICAgIC0gYWNjZXB0IGNvbm5lY3Rpb25zIHNlY3VyZWQgd2l0aCBUTFMgYW5kIGEgcHJlLXNoYXJlZCBrZXkKIwkJY2VydCAgICAgICAgLSBhY2NlcHQgY29ubmVjdGlvbnMgc2VjdXJlZCB3aXRoIFRMUyBhbmQgYSBjZXJ0aWZpY2F0ZQojCiMgTWFuZGF0b3J5OiB5ZXMsIGlmIFRMUyBjZXJ0aWZpY2F0ZSBvciBQU0sgcGFyYW1ldGVycyBhcmUgZGVmaW5lZCAoZXZlbiBmb3IgJ3VuZW5jcnlwdGVkJyBjb25uZWN0aW9uKQojIERlZmF1bHQ6CiMgVExTQWNjZXB0PXVuZW5jcnlwdGUKI1RMU0FjY2VwdD1wc2sKCiMjIyBPcHRpb246IFRMU0NBRmlsZQojCUZ1bGwgcGF0aG5hbWUgb2YgYSBmaWxlIGNvbnRhaW5pbmcgdGhlIHRvcC1sZXZlbCBDQShzKSBjZXJ0aWZpY2F0ZXMgZm9yCiMJcGVlciBjZXJ0aWZpY2F0ZSB2ZXJpZmljYXRpb24uCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNDQUZpbGU9CgojIyMgT3B0aW9uOiBUTFNDUkxGaWxlCiMJRnVsbCBwYXRobmFtZSBvZiBhIGZpbGUgY29udGFpbmluZyByZXZva2VkIGNlcnRpZmljYXRlcy4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFRMU0NSTEZpbGU9CgojIyMgT3B0aW9uOiBUTFNTZXJ2ZXJDZXJ0SXNzdWVyCiMgICAgICBBbGxvd2VkIHNlcnZlciBjZXJ0aWZpY2F0ZSBpc3N1ZXIuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNTZXJ2ZXJDZXJ0SXNzdWVyPQoKIyMjIE9wdGlvbjogVExTU2VydmVyQ2VydFN1YmplY3QKIyAgICAgIEFsbG93ZWQgc2VydmVyIGNlcnRpZmljYXRlIHN1YmplY3QuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNTZXJ2ZXJDZXJ0U3ViamVjdD0KCiMjIyBPcHRpb246IFRMU0NlcnRGaWxlCiMJRnVsbCBwYXRobmFtZSBvZiBhIGZpbGUgY29udGFpbmluZyB0aGUgcHJveHkgY2VydGlmaWNhdGUgb3IgY2VydGlmaWNhdGUgY2hhaW4uCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNDZXJ0RmlsZT0KCiMjIyBPcHRpb246IFRMU0tleUZpbGUKIwlGdWxsIHBhdGhuYW1lIG9mIGEgZmlsZSBjb250YWluaW5nIHRoZSBwcm94eSBwcml2YXRlIGtleS4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFRMU0tleUZpbGU9CgojIyMgT3B0aW9uOiBUTFNQU0tJZGVudGl0eQojCVVuaXF1ZSwgY2FzZSBzZW5zaXRpdmUgc3RyaW5nIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHByZS1zaGFyZWQga2V5LgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgVExTUFNLSWRlbnRpdHk9CgojVExTUFNLSWRlbnRpdHk9UFNLIDAwMgoKIyMjIE9wdGlvbjogVExTUFNLRmlsZQojCUZ1bGwgcGF0aG5hbWUgb2YgYSBmaWxlIGNvbnRhaW5pbmcgdGhlIHByZS1zaGFyZWQga2V5LgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgVExTUFNLRmlsZT0KCiNUTFNQU0tGaWxlPS9ob21lL3phYmJpeC96YWJiaXhfcHJveHkucHNrCgoK" | base64 --decode > /usr/local/etc/zabbix_proxy.conf

# conf for agent
echo "IyBUaGlzIGlzIGEgY29uZmlndXJhdGlvbiBmaWxlIGZvciBaYWJiaXggYWdlbnQgZGFlbW9uIChVbml4KQojIFRvIGdldCBtb3JlIGluZm9ybWF0aW9uIGFib3V0IFphYmJpeCwgdmlzaXQgaHR0cDovL3d3dy56YWJiaXguY29tCgojIyMjIyMjIyMjIyMgR0VORVJBTCBQQVJBTUVURVJTICMjIyMjIyMjIyMjIyMjIyMjCgojIyMgT3B0aW9uOiBQaWRGaWxlCiMJTmFtZSBvZiBQSUQgZmlsZS4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFBpZEZpbGU9L3RtcC96YWJiaXhfYWdlbnRkLnBpZApQaWRGaWxlPS9kZXYvc2htL3phYmJpeF9hZ2VudGQucGlkCgojIyMgT3B0aW9uOiBMb2dUeXBlCiMJU3BlY2lmaWVzIHdoZXJlIGxvZyBtZXNzYWdlcyBhcmUgd3JpdHRlbiB0bzoKIwkJc3lzdGVtICAtIHN5c2xvZwojCQlmaWxlICAgIC0gZmlsZSBzcGVjaWZpZWQgd2l0aCBMb2dGaWxlIHBhcmFtZXRlcgojCQljb25zb2xlIC0gc3RhbmRhcmQgb3V0cHV0CiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBMb2dUeXBlPWZpbGUKCiMjIyBPcHRpb246IExvZ0ZpbGUKIwlMb2cgZmlsZSBuYW1lIGZvciBMb2dUeXBlICdmaWxlJyBwYXJhbWV0ZXIuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBMb2dGaWxlPQoKTG9nRmlsZT0vZGV2L3NobS96YWJiaXhfYWdlbnRkLmxvZwoKIyMjIE9wdGlvbjogTG9nRmlsZVNpemUKIwlNYXhpbXVtIHNpemUgb2YgbG9nIGZpbGUgaW4gTUIuCiMJMCAtIGRpc2FibGUgYXV0b21hdGljIGxvZyByb3RhdGlvbi4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMC0xMDI0CiMgRGVmYXVsdDoKIyBMb2dGaWxlU2l6ZT0xCgojIyMgT3B0aW9uOiBEZWJ1Z0xldmVsCiMJU3BlY2lmaWVzIGRlYnVnIGxldmVsOgojCTAgLSBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBzdGFydGluZyBhbmQgc3RvcHBpbmcgb2YgWmFiYml4IHByb2Nlc3NlcwojCTEgLSBjcml0aWNhbCBpbmZvcm1hdGlvbgojCTIgLSBlcnJvciBpbmZvcm1hdGlvbgojCTMgLSB3YXJuaW5ncwojCTQgLSBmb3IgZGVidWdnaW5nIChwcm9kdWNlcyBsb3RzIG9mIGluZm9ybWF0aW9uKQojCTUgLSBleHRlbmRlZCBkZWJ1Z2dpbmcgKHByb2R1Y2VzIGV2ZW4gbW9yZSBpbmZvcm1hdGlvbikKIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMC01CiMgRGVmYXVsdDoKIyBEZWJ1Z0xldmVsPTMKCiMjIyBPcHRpb246IFNvdXJjZUlQCiMJU291cmNlIElQIGFkZHJlc3MgZm9yIG91dGdvaW5nIGNvbm5lY3Rpb25zLgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgU291cmNlSVA9CgojIyMgT3B0aW9uOiBFbmFibGVSZW1vdGVDb21tYW5kcwojCVdoZXRoZXIgcmVtb3RlIGNvbW1hbmRzIGZyb20gWmFiYml4IHNlcnZlciBhcmUgYWxsb3dlZC4KIwkwIC0gbm90IGFsbG93ZWQKIwkxIC0gYWxsb3dlZAojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CkVuYWJsZVJlbW90ZUNvbW1hbmRzPTEKCiMjIyBPcHRpb246IExvZ1JlbW90ZUNvbW1hbmRzCiMJRW5hYmxlIGxvZ2dpbmcgb2YgZXhlY3V0ZWQgc2hlbGwgY29tbWFuZHMgYXMgd2FybmluZ3MuCiMJMCAtIGRpc2FibGVkCiMJMSAtIGVuYWJsZWQKIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgpMb2dSZW1vdGVDb21tYW5kcz0xCgojIyMjIyBQYXNzaXZlIGNoZWNrcyByZWxhdGVkCgojIyMgT3B0aW9uOiBTZXJ2ZXIKIwlMaXN0IG9mIGNvbW1hIGRlbGltaXRlZCBJUCBhZGRyZXNzZXMsIG9wdGlvbmFsbHkgaW4gQ0lEUiBub3RhdGlvbiwgb3IgaG9zdG5hbWVzIG9mIFphYmJpeCBzZXJ2ZXJzLgojCUluY29taW5nIGNvbm5lY3Rpb25zIHdpbGwgYmUgYWNjZXB0ZWQgb25seSBmcm9tIHRoZSBob3N0cyBsaXN0ZWQgaGVyZS4KIwlJZiBJUHY2IHN1cHBvcnQgaXMgZW5hYmxlZCB0aGVuICcxMjcuMC4wLjEnLCAnOjoxMjcuMC4wLjEnLCAnOjpmZmZmOjEyNy4wLjAuMScgYXJlIHRyZWF0ZWQgZXF1YWxseSBhbmQgJzo6LzAnIHdpbGwgYWxsb3cgYW55IElQdjQgb3IgSVB2NiBhZGRyZXNzLgojCScwLjAuMC4wLzAnIGNhbiBiZSB1c2VkIHRvIGFsbG93IGFueSBJUHY0IGFkZHJlc3MuCiMJRXhhbXBsZTogU2VydmVyPTEyNy4wLjAuMSwxOTIuMTY4LjEuMC8yNCw6OjEsMjAwMTpkYjg6Oi8zMix6YWJiaXguZG9tYWluCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBTZXJ2ZXI9CgpTZXJ2ZXI9MTI3LjAuMC4xCgojIyMgT3B0aW9uOiBMaXN0ZW5Qb3J0CiMJQWdlbnQgd2lsbCBsaXN0ZW4gb24gdGhpcyBwb3J0IGZvciBjb25uZWN0aW9ucyBmcm9tIHRoZSBzZXJ2ZXIuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEwMjQtMzI3NjcKIyBEZWZhdWx0OgojIExpc3RlblBvcnQ9MTAwNTAKCiMjIyBPcHRpb246IExpc3RlbklQCiMJTGlzdCBvZiBjb21tYSBkZWxpbWl0ZWQgSVAgYWRkcmVzc2VzIHRoYXQgdGhlIGFnZW50IHNob3VsZCBsaXN0ZW4gb24uCiMJRmlyc3QgSVAgYWRkcmVzcyBpcyBzZW50IHRvIFphYmJpeCBzZXJ2ZXIgaWYgY29ubmVjdGluZyB0byBpdCB0byByZXRyaWV2ZSBsaXN0IG9mIGFjdGl2ZSBjaGVja3MuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBMaXN0ZW5JUD0wLjAuMC4wCgojIyMgT3B0aW9uOiBTdGFydEFnZW50cwojCU51bWJlciBvZiBwcmUtZm9ya2VkIGluc3RhbmNlcyBvZiB6YWJiaXhfYWdlbnRkIHRoYXQgcHJvY2VzcyBwYXNzaXZlIGNoZWNrcy4KIwlJZiBzZXQgdG8gMCwgZGlzYWJsZXMgcGFzc2l2ZSBjaGVja3MgYW5kIHRoZSBhZ2VudCB3aWxsIG5vdCBsaXN0ZW4gb24gYW55IFRDUCBwb3J0LgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTEwMAojIERlZmF1bHQ6CiMgU3RhcnRBZ2VudHM9MwoKIyMjIyMgQWN0aXZlIGNoZWNrcyByZWxhdGVkCgojIyMgT3B0aW9uOiBTZXJ2ZXJBY3RpdmUKIwlMaXN0IG9mIGNvbW1hIGRlbGltaXRlZCBJUDpwb3J0IChvciBob3N0bmFtZTpwb3J0KSBwYWlycyBvZiBaYWJiaXggc2VydmVycyBmb3IgYWN0aXZlIGNoZWNrcy4KIwlJZiBwb3J0IGlzIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHQgcG9ydCBpcyB1c2VkLgojCUlQdjYgYWRkcmVzc2VzIG11c3QgYmUgZW5jbG9zZWQgaW4gc3F1YXJlIGJyYWNrZXRzIGlmIHBvcnQgZm9yIHRoYXQgaG9zdCBpcyBzcGVjaWZpZWQuCiMJSWYgcG9ydCBpcyBub3Qgc3BlY2lmaWVkLCBzcXVhcmUgYnJhY2tldHMgZm9yIElQdjYgYWRkcmVzc2VzIGFyZSBvcHRpb25hbC4KIwlJZiB0aGlzIHBhcmFtZXRlciBpcyBub3Qgc3BlY2lmaWVkLCBhY3RpdmUgY2hlY2tzIGFyZSBkaXNhYmxlZC4KIwlFeGFtcGxlOiBTZXJ2ZXJBY3RpdmU9MTI3LjAuMC4xOjIwMDUxLHphYmJpeC5kb21haW4sWzo6MV06MzAwNTEsOjoxLFsxMmZjOjoxXQojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgU2VydmVyQWN0aXZlPQoKU2VydmVyQWN0aXZlPTEyNy4wLjAuMQoKIyMjIE9wdGlvbjogSG9zdG5hbWUKIwlVbmlxdWUsIGNhc2Ugc2Vuc2l0aXZlIGhvc3RuYW1lLgojCVJlcXVpcmVkIGZvciBhY3RpdmUgY2hlY2tzIGFuZCBtdXN0IG1hdGNoIGhvc3RuYW1lIGFzIGNvbmZpZ3VyZWQgb24gdGhlIHNlcnZlci4KIwlWYWx1ZSBpcyBhY3F1aXJlZCBmcm9tIEhvc3RuYW1lSXRlbSBpZiB1bmRlZmluZWQuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBIb3N0bmFtZT0KCiMjIyBPcHRpb246IEhvc3RuYW1lSXRlbQojCUl0ZW0gdXNlZCBmb3IgZ2VuZXJhdGluZyBIb3N0bmFtZSBpZiBpdCBpcyB1bmRlZmluZWQuIElnbm9yZWQgaWYgSG9zdG5hbWUgaXMgZGVmaW5lZC4KIwlEb2VzIG5vdCBzdXBwb3J0IFVzZXJQYXJhbWV0ZXJzIG9yIGFsaWFzZXMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKI0hvc3RuYW1lSXRlbT1zeXN0ZW0uaG9zdG5hbWUKSG9zdG5hbWVJdGVtPXN5c3RlbS5ydW5baWZjb25maWcgZXRoMHxlZ3JlcCAtbyAiLi46Li46Li4gInxzZWQgInN8Onx8ZztzfC4kfHw7c3xefFJQaVByb3hZfCJdCgojIyMgT3B0aW9uOiBIb3N0TWV0YWRhdGEKIwlPcHRpb25hbCBwYXJhbWV0ZXIgdGhhdCBkZWZpbmVzIGhvc3QgbWV0YWRhdGEuCiMJSG9zdCBtZXRhZGF0YSBpcyB1c2VkIGF0IGhvc3QgYXV0by1yZWdpc3RyYXRpb24gcHJvY2Vzcy4KIwlBbiBhZ2VudCB3aWxsIGlzc3VlIGFuIGVycm9yIGFuZCBub3Qgc3RhcnQgaWYgdGhlIHZhbHVlIGlzIG92ZXIgbGltaXQgb2YgMjU1IGNoYXJhY3RlcnMuCiMJSWYgbm90IGRlZmluZWQsIHZhbHVlIHdpbGwgYmUgYWNxdWlyZWQgZnJvbSBIb3N0TWV0YWRhdGFJdGVtLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAwLTI1NSBjaGFyYWN0ZXJzCiMgRGVmYXVsdDoKI0hvc3RNZXRhZGF0YT1ycGkKCiMjIyBPcHRpb246IEhvc3RNZXRhZGF0YUl0ZW0KIwlPcHRpb25hbCBwYXJhbWV0ZXIgdGhhdCBkZWZpbmVzIGFuIGl0ZW0gdXNlZCBmb3IgZ2V0dGluZyBob3N0IG1ldGFkYXRhLgojCUhvc3QgbWV0YWRhdGEgaXMgdXNlZCBhdCBob3N0IGF1dG8tcmVnaXN0cmF0aW9uIHByb2Nlc3MuCiMJRHVyaW5nIGFuIGF1dG8tcmVnaXN0cmF0aW9uIHJlcXVlc3QgYW4gYWdlbnQgd2lsbCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYKIwl0aGUgdmFsdWUgcmV0dXJuZWQgYnkgc3BlY2lmaWVkIGl0ZW0gaXMgb3ZlciBsaW1pdCBvZiAyNTUgY2hhcmFjdGVycy4KIwlUaGlzIG9wdGlvbiBpcyBvbmx5IHVzZWQgd2hlbiBIb3N0TWV0YWRhdGEgaXMgbm90IGRlZmluZWQuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBIb3N0TWV0YWRhdGFJdGVtPXJwaQoKIyMjIE9wdGlvbjogUmVmcmVzaEFjdGl2ZUNoZWNrcwojCUhvdyBvZnRlbiBsaXN0IG9mIGFjdGl2ZSBjaGVja3MgaXMgcmVmcmVzaGVkLCBpbiBzZWNvbmRzLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiA2MC0zNjAwCiMgRGVmYXVsdDoKIyBSZWZyZXNoQWN0aXZlQ2hlY2tzPTEyMAoKIyMjIE9wdGlvbjogQnVmZmVyU2VuZAojCURvIG5vdCBrZWVwIGRhdGEgbG9uZ2VyIHRoYW4gTiBzZWNvbmRzIGluIGJ1ZmZlci4KIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMS0zNjAwCiMgRGVmYXVsdDoKIyBCdWZmZXJTZW5kPTUKCiMjIyBPcHRpb246IEJ1ZmZlclNpemUKIwlNYXhpbXVtIG51bWJlciBvZiB2YWx1ZXMgaW4gYSBtZW1vcnkgYnVmZmVyLiBUaGUgYWdlbnQgd2lsbCBzZW5kCiMJYWxsIGNvbGxlY3RlZCBkYXRhIHRvIFphYmJpeCBTZXJ2ZXIgb3IgUHJveHkgaWYgdGhlIGJ1ZmZlciBpcyBmdWxsLgojCiMgTWFuZGF0b3J5OiBubwojIFJhbmdlOiAyLTY1NTM1CiMgRGVmYXVsdDoKIyBCdWZmZXJTaXplPTEwMAoKIyMjIE9wdGlvbjogTWF4TGluZXNQZXJTZWNvbmQKIwlNYXhpbXVtIG51bWJlciBvZiBuZXcgbGluZXMgdGhlIGFnZW50IHdpbGwgc2VuZCBwZXIgc2Vjb25kIHRvIFphYmJpeCBTZXJ2ZXIKIwlvciBQcm94eSBwcm9jZXNzaW5nICdsb2cnIGFuZCAnbG9ncnQnIGFjdGl2ZSBjaGVja3MuCiMJVGhlIHByb3ZpZGVkIHZhbHVlIHdpbGwgYmUgb3ZlcnJpZGRlbiBieSB0aGUgcGFyYW1ldGVyICdtYXhsaW5lcycsCiMJcHJvdmlkZWQgaW4gJ2xvZycgb3IgJ2xvZ3J0JyBpdGVtIGtleXMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDEtMTAwMAojIERlZmF1bHQ6CiMgTWF4TGluZXNQZXJTZWNvbmQ9MjAKCiMjIyMjIyMjIyMjIyBBRFZBTkNFRCBQQVJBTUVURVJTICMjIyMjIyMjIyMjIyMjIyMjCgojIyMgT3B0aW9uOiBBbGlhcwojCVNldHMgYW4gYWxpYXMgZm9yIGFuIGl0ZW0ga2V5LiBJdCBjYW4gYmUgdXNlZCB0byBzdWJzdGl0dXRlIGxvbmcgYW5kIGNvbXBsZXggaXRlbSBrZXkgd2l0aCBhIHNtYWxsZXIgYW5kIHNpbXBsZXIgb25lLgojCU11bHRpcGxlIEFsaWFzIHBhcmFtZXRlcnMgbWF5IGJlIHByZXNlbnQuIE11bHRpcGxlIHBhcmFtZXRlcnMgd2l0aCB0aGUgc2FtZSBBbGlhcyBrZXkgYXJlIG5vdCBhbGxvd2VkLgojCURpZmZlcmVudCBBbGlhcyBrZXlzIG1heSByZWZlcmVuY2UgdGhlIHNhbWUgaXRlbSBrZXkuCiMJRm9yIGV4YW1wbGUsIHRvIHJldHJpZXZlIHRoZSBJRCBvZiB1c2VyICd6YWJiaXgnOgojCUFsaWFzPXphYmJpeC51c2VyaWQ6dmZzLmZpbGUucmVnZXhwWy9ldGMvcGFzc3dkLF56YWJiaXg6LjooWzAtOV0rKSwsLCxcMV0KIwlOb3cgc2hvcnRoYW5kIGtleSB6YWJiaXgudXNlcmlkIG1heSBiZSB1c2VkIHRvIHJldHJpZXZlIGRhdGEuCiMJQWxpYXNlcyBjYW4gYmUgdXNlZCBpbiBIb3N0TWV0YWRhdGFJdGVtIGJ1dCBub3QgaW4gSG9zdG5hbWVJdGVtIHBhcmFtZXRlcnMuCiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6CiMgRGVmYXVsdDoKCiMjIyBPcHRpb246IFRpbWVvdXQKIwlTcGVuZCBubyBtb3JlIHRoYW4gVGltZW91dCBzZWNvbmRzIG9uIHByb2Nlc3NpbmcKIwojIE1hbmRhdG9yeTogbm8KIyBSYW5nZTogMS0zMAojIERlZmF1bHQ6CiMgVGltZW91dD0zCgojIyMgT3B0aW9uOiBBbGxvd1Jvb3QKIwlBbGxvdyB0aGUgYWdlbnQgdG8gcnVuIGFzICdyb290Jy4gSWYgZGlzYWJsZWQgYW5kIHRoZSBhZ2VudCBpcyBzdGFydGVkIGJ5ICdyb290JywgdGhlIGFnZW50CiMJd2lsbCB0cnkgdG8gc3dpdGNoIHRvIHRoZSB1c2VyIHNwZWNpZmllZCBieSB0aGUgVXNlciBjb25maWd1cmF0aW9uIG9wdGlvbiBpbnN0ZWFkLgojCUhhcyBubyBlZmZlY3QgaWYgc3RhcnRlZCB1bmRlciBhIHJlZ3VsYXIgdXNlci4KIwkwIC0gZG8gbm90IGFsbG93CiMJMSAtIGFsbG93CiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBBbGxvd1Jvb3Q9MAoKIyMjIE9wdGlvbjogVXNlcgojCURyb3AgcHJpdmlsZWdlcyB0byBhIHNwZWNpZmljLCBleGlzdGluZyB1c2VyIG9uIHRoZSBzeXN0ZW0uCiMJT25seSBoYXMgZWZmZWN0IGlmIHJ1biBhcyAncm9vdCcgYW5kIEFsbG93Um9vdCBpcyBkaXNhYmxlZC4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFVzZXI9emFiYml4CgojIyMgT3B0aW9uOiBJbmNsdWRlCiMJWW91IG1heSBpbmNsdWRlIGluZGl2aWR1YWwgZmlsZXMgb3IgYWxsIGZpbGVzIGluIGEgZGlyZWN0b3J5IGluIHRoZSBjb25maWd1cmF0aW9uIGZpbGUuCiMJSW5zdGFsbGluZyBaYWJiaXggd2lsbCBjcmVhdGUgaW5jbHVkZSBkaXJlY3RvcnkgaW4gL3Vzci9sb2NhbC9ldGMsIHVubGVzcyBtb2RpZmllZCBkdXJpbmcgdGhlIGNvbXBpbGUgdGltZS4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIEluY2x1ZGU9CgojIEluY2x1ZGU9L3Vzci9sb2NhbC9ldGMvemFiYml4X2FnZW50ZC51c2VycGFyYW1zLmNvbmYKIyBJbmNsdWRlPS91c3IvbG9jYWwvZXRjL3phYmJpeF9hZ2VudGQuY29uZi5kLwpJbmNsdWRlPS91c3IvbG9jYWwvZXRjL3phYmJpeF9hZ2VudGQuY29uZi5kLyouY29uZgoKIyMjIyMjIyBVU0VSLURFRklORUQgTU9OSVRPUkVEIFBBUkFNRVRFUlMgIyMjIyMjIwoKIyMjIE9wdGlvbjogVW5zYWZlVXNlclBhcmFtZXRlcnMKIwlBbGxvdyBhbGwgY2hhcmFjdGVycyB0byBiZSBwYXNzZWQgaW4gYXJndW1lbnRzIHRvIHVzZXItZGVmaW5lZCBwYXJhbWV0ZXJzLgojCVRoZSBmb2xsb3dpbmcgY2hhcmFjdGVycyBhcmUgbm90IGFsbG93ZWQ6CiMJXCAnICIgYCAqID8gWyBdIHsgfSB+ICQgISAmIDsgKCApIDwgPiB8ICMgQAojCUFkZGl0aW9uYWxseSwgbmV3bGluZSBjaGFyYWN0ZXJzIGFyZSBub3QgYWxsb3dlZC4KIwkwIC0gZG8gbm90IGFsbG93CiMJMSAtIGFsbG93CiMKIyBNYW5kYXRvcnk6IG5vCiMgUmFuZ2U6IDAtMQojIERlZmF1bHQ6CiMgVW5zYWZlVXNlclBhcmFtZXRlcnM9MAoKIyMjIE9wdGlvbjogVXNlclBhcmFtZXRlcgojCVVzZXItZGVmaW5lZCBwYXJhbWV0ZXIgdG8gbW9uaXRvci4gVGhlcmUgY2FuIGJlIHNldmVyYWwgdXNlci1kZWZpbmVkIHBhcmFtZXRlcnMuCiMJRm9ybWF0OiBVc2VyUGFyYW1ldGVyPTxrZXk+LDxzaGVsbCBjb21tYW5kPgojCVNlZSAnemFiYml4X2FnZW50ZCcgZGlyZWN0b3J5IGZvciBleGFtcGxlcy4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFVzZXJQYXJhbWV0ZXI9CgojIyMjIyMjIExPQURBQkxFIE1PRFVMRVMgIyMjIyMjIwoKIyMjIE9wdGlvbjogTG9hZE1vZHVsZVBhdGgKIwlGdWxsIHBhdGggdG8gbG9jYXRpb24gb2YgYWdlbnQgbW9kdWxlcy4KIwlEZWZhdWx0IGRlcGVuZHMgb24gY29tcGlsYXRpb24gb3B0aW9ucy4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIExvYWRNb2R1bGVQYXRoPSR7bGliZGlyfS9tb2R1bGVzCgojIyMgT3B0aW9uOiBMb2FkTW9kdWxlCiMJTW9kdWxlIHRvIGxvYWQgYXQgYWdlbnQgc3RhcnR1cC4gTW9kdWxlcyBhcmUgdXNlZCB0byBleHRlbmQgZnVuY3Rpb25hbGl0eSBvZiB0aGUgYWdlbnQuCiMJRm9ybWF0OiBMb2FkTW9kdWxlPTxtb2R1bGUuc28+CiMJVGhlIG1vZHVsZXMgbXVzdCBiZSBsb2NhdGVkIGluIGRpcmVjdG9yeSBzcGVjaWZpZWQgYnkgTG9hZE1vZHVsZVBhdGguCiMJSXQgaXMgYWxsb3dlZCB0byBpbmNsdWRlIG11bHRpcGxlIExvYWRNb2R1bGUgcGFyYW1ldGVycy4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIExvYWRNb2R1bGU9CgojIyMjIyMjIFRMUy1SRUxBVEVEIFBBUkFNRVRFUlMgIyMjIyMjIwoKIyMjIE9wdGlvbjogVExTQ29ubmVjdAojCUhvdyB0aGUgYWdlbnQgc2hvdWxkIGNvbm5lY3QgdG8gc2VydmVyIG9yIHByb3h5LiBVc2VkIGZvciBhY3RpdmUgY2hlY2tzLgojCU9ubHkgb25lIHZhbHVlIGNhbiBiZSBzcGVjaWZpZWQ6CiMJCXVuZW5jcnlwdGVkIC0gY29ubmVjdCB3aXRob3V0IGVuY3J5cHRpb24KIwkJcHNrICAgICAgICAgLSBjb25uZWN0IHVzaW5nIFRMUyBhbmQgYSBwcmUtc2hhcmVkIGtleQojCQljZXJ0ICAgICAgICAtIGNvbm5lY3QgdXNpbmcgVExTIGFuZCBhIGNlcnRpZmljYXRlCiMKIyBNYW5kYXRvcnk6IHllcywgaWYgVExTIGNlcnRpZmljYXRlIG9yIFBTSyBwYXJhbWV0ZXJzIGFyZSBkZWZpbmVkIChldmVuIGZvciAndW5lbmNyeXB0ZWQnIGNvbm5lY3Rpb24pCiMgRGVmYXVsdDoKIyBUTFNDb25uZWN0PXVuZW5jcnlwdGVkCgojIyMgT3B0aW9uOiBUTFNBY2NlcHQKIwlXaGF0IGluY29taW5nIGNvbm5lY3Rpb25zIHRvIGFjY2VwdC4KIwlNdWx0aXBsZSB2YWx1ZXMgY2FuIGJlIHNwZWNpZmllZCwgc2VwYXJhdGVkIGJ5IGNvbW1hOgojCQl1bmVuY3J5cHRlZCAtIGFjY2VwdCBjb25uZWN0aW9ucyB3aXRob3V0IGVuY3J5cHRpb24KIwkJcHNrICAgICAgICAgLSBhY2NlcHQgY29ubmVjdGlvbnMgc2VjdXJlZCB3aXRoIFRMUyBhbmQgYSBwcmUtc2hhcmVkIGtleQojCQljZXJ0ICAgICAgICAtIGFjY2VwdCBjb25uZWN0aW9ucyBzZWN1cmVkIHdpdGggVExTIGFuZCBhIGNlcnRpZmljYXRlCiMKIyBNYW5kYXRvcnk6IHllcywgaWYgVExTIGNlcnRpZmljYXRlIG9yIFBTSyBwYXJhbWV0ZXJzIGFyZSBkZWZpbmVkIChldmVuIGZvciAndW5lbmNyeXB0ZWQnIGNvbm5lY3Rpb24pCiMgRGVmYXVsdDoKIyBUTFNBY2NlcHQ9dW5lbmNyeXB0ZWQKCiMjIyBPcHRpb246IFRMU0NBRmlsZQojCUZ1bGwgcGF0aG5hbWUgb2YgYSBmaWxlIGNvbnRhaW5pbmcgdGhlIHRvcC1sZXZlbCBDQShzKSBjZXJ0aWZpY2F0ZXMgZm9yCiMJcGVlciBjZXJ0aWZpY2F0ZSB2ZXJpZmljYXRpb24uCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNDQUZpbGU9CgojIyMgT3B0aW9uOiBUTFNDUkxGaWxlCiMJRnVsbCBwYXRobmFtZSBvZiBhIGZpbGUgY29udGFpbmluZyByZXZva2VkIGNlcnRpZmljYXRlcy4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFRMU0NSTEZpbGU9CgojIyMgT3B0aW9uOiBUTFNTZXJ2ZXJDZXJ0SXNzdWVyCiMgICAgICBBbGxvd2VkIHNlcnZlciBjZXJ0aWZpY2F0ZSBpc3N1ZXIuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNTZXJ2ZXJDZXJ0SXNzdWVyPQoKIyMjIE9wdGlvbjogVExTU2VydmVyQ2VydFN1YmplY3QKIyAgICAgIEFsbG93ZWQgc2VydmVyIGNlcnRpZmljYXRlIHN1YmplY3QuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNTZXJ2ZXJDZXJ0U3ViamVjdD0KCiMjIyBPcHRpb246IFRMU0NlcnRGaWxlCiMJRnVsbCBwYXRobmFtZSBvZiBhIGZpbGUgY29udGFpbmluZyB0aGUgYWdlbnQgY2VydGlmaWNhdGUgb3IgY2VydGlmaWNhdGUgY2hhaW4uCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNDZXJ0RmlsZT0KCiMjIyBPcHRpb246IFRMU0tleUZpbGUKIwlGdWxsIHBhdGhuYW1lIG9mIGEgZmlsZSBjb250YWluaW5nIHRoZSBhZ2VudCBwcml2YXRlIGtleS4KIwojIE1hbmRhdG9yeTogbm8KIyBEZWZhdWx0OgojIFRMU0tleUZpbGU9CgojIyMgT3B0aW9uOiBUTFNQU0tJZGVudGl0eQojCVVuaXF1ZSwgY2FzZSBzZW5zaXRpdmUgc3RyaW5nIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHByZS1zaGFyZWQga2V5LgojCiMgTWFuZGF0b3J5OiBubwojIERlZmF1bHQ6CiMgVExTUFNLSWRlbnRpdHk9CgojIyMgT3B0aW9uOiBUTFNQU0tGaWxlCiMJRnVsbCBwYXRobmFtZSBvZiBhIGZpbGUgY29udGFpbmluZyB0aGUgcHJlLXNoYXJlZCBrZXkuCiMKIyBNYW5kYXRvcnk6IG5vCiMgRGVmYXVsdDoKIyBUTFNQU0tGaWxlPQoK" | base64 --decode > /usr/local/etc/zabbix_agentd.conf




systemctl start {zabbix-agent,zabbix-proxy}
